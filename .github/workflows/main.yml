---
name: just a simply ci test

on:
  push:
  #   branches:
  #     - master
  #     - main
  # pull_request:
  #   branches:
  #     - master
  #     - main
# on:
#   pull_request:
#     paths-ignore:
#       - "docs/**"
#       - "examples/**"
#   workflow_dispatch:
#   push:
#     branches:
#       - master
#       - main
#     paths-ignore:
#       - "docs/**"
#       - "examples/**"

jobs:
  pre-commit:
    runs-on: ubuntu-latest
    steps:
      # This step checks out a copy of your repository.
      - uses: actions/checkout@v3
      # This step references the directory that contains the action.
      - uses: ./.github/actions/pre-commit
  dlrover-python-test:
    runs-on: ubuntu-latest
    steps:
      # This step checks out a copy of your repository.
      - name: checkout branch
        uses: actions/checkout@main

      - name: setup python specific version
        uses: actions/setup-python@main
        with:
          python-version: 3.8
      # This step references the directory that contains the action.
      - name: run pytest
        uses: ./.github/actions/dlrover-python-test
      - name: upload code coverage to codecov
        uses: codecov/codecov-action@v5
        with:
          token: ${{ secrets.CODECOV_TOKEN }}
          slug: intelligent-machine-learning/dlrover
          verbose: true
        env:
          CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}

  # operator-test:
  #   runs-on: ubuntu-latest
  #   steps:
  #     # This step checks out a copy of your repository.
  #     - uses: actions/checkout@v3
  #     # This step references the directory that contains the action.
  #     - name: RUN gotest
  #       uses: ./.github/actions/operator-test
  # brain-test:
  #   runs-on: ubuntu-latest
  #   steps:
  #     # This step checks out a copy of your repository.
  #     - uses: actions/checkout@v3
  #     # This step references the directory that contains the action.
  #     - uses: ./.github/actions/brain-test
  # dlrover-system-test-criteo-deeprec:
  #   runs-on: ubuntu-latest
  #   steps:
  #     # This step checks out a copy of your repository.
  #     - uses: actions/checkout@v3
  #     # This step references the directory that contains the action.
  #     - uses: ./.github/actions/dlrover-system-test-criteo-deeprec
  # dlrover-system-test-deepfm:
  #   runs-on: ubuntu-latest
  #   steps:
  #     # This step checks out a copy of your repository.
  #     - uses: actions/checkout@v3
  #     # This step references the directory that contains the action.
  #     - uses: ./.github/actions/dlrover-system-test-deepfm
  # dlrover-system-test-tf2:
  #   runs-on: ubuntu-latest
  #   steps:
  #     # This step checks out a copy of your repository.
  #     - uses: actions/checkout@v3
  #     # This step references the directory that contains the action.
  #     - uses: ./.github/actions/dlrover-system-test-tf2
