# Argument Reference

This article primarily introduces the various arguments that users might use
when training with DLRover.

## 1. DLRover Master Arguments
* For master(dlrover.python.master.main) initiation. User can use annotations(except: job_name, namespace) to express the following arguments.

| name                  | description                                                                                                                                                                                                                   | mandatory | format               | default                                                                             | options                                                                          |
|-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|----------------------|-------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| job_name              | <div style="width: 200pt"> The name of the job defined by user.                                                                                                                                                               | Yes       | string               | n/a                                                                                 | <div style="width: 100pt"> n/a                                                   |
| namespace             | The name of the Kubernetes namespace where ElasticJob pods will be created.                                                                                                                                                   | No        | string               | default                                                                             | n/a                                                                              |
| platform              | The name of platform.                                                                                                                                                                                                         | No        | string               | pyk8s                                                                               | pyk8s, k8s, ray or local                                                         |
| pending_timeout       | The timeout value of pending.                                                                                                                                                                                                 | No        | integer(unit: second) | 900                                                                                 | \>=0                                                                             |
| pending_fail_strategy | The fail strategy for pending case.                                                                                                                                                                                           | No        | integer              | 1                                                                                   | -1: disabled <br/>0: skip <br/>1: verify necessary parts <br/>2: verify all parts |
| service_type          | The type of master service.                                                                                                                                                                                                   | No        | string               | grpc                                                                                | grpc,http                                                                        |
| xpu_type              | The name of xpu.                                                                                                                                                                                                              | No        | string               | nvidia                                                                              | nvidia,ascend                                                                    |
| hang_detection        | The strategy of 'hang detection'.                                                                                                                                                                                             | No        | integer              | 1                                                                                   | 0: log only <br/>1: notify <br/>2: with fault tolerance <br/>                    |
| hang_downtime         | Training downtime to detect job hang, unit is minute.                                                                                                                                                                         | No        | integer              | 30                                                                                  | \>=0                                                                             |
| pre_check_ops         | The pre-check operators configuration, format: [(${module_name}, ${class_name}, ${boolean}), ...]. The boolean value represent 'bypass or not'. If set to False it indicates bypass, otherwise it indicates normal execution. | No        | string(tuple list)   | [("dlrover.python.master.diagnosis.precheck_operator", "NoPreCheckOperator", True)] | user defined                                                                    |


## 2. Training Arguments
* For training command.

| name               | description                                                                                                                                                                                                                    | mandatory | format  | default        | options                                                                                                                                                                                                         |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----|---------|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| precheck           | <div style="width: 200pt"> The level to check the node before starting the training task.                                                                                                                                      | No | integer | 0              | <div style="width: 100pt"> 0: no check <br/>1: splits nodes into groups to runs a matmul and allgather task and each group has 2nodes <br/>2: will run an allgather task with all nodes to test the performance |
| node_unit          | The number unit of nodes to schedule. The scheduled number of nodes should be a multiple of node_unit.                                                                                                                         | No | integer | 1              | \>=1                                                                                                                                                                                                            |
| nnodes          | The number unit of nodes to schedule. The scheduled number of nodes should be a multiple of node_unit.                                                                                                                         | No | integer | 1              | \>=1                                                                                                                                                                                                            |
| rdzv_conf          | The configuration for rendezvous.                                                                                                                                                                                              | No | dict    | n/a            | supported key: join_timeout(value > 0)                                                                                                                                                                          |
| max_restarts          | Maximum restart attempts for processes if worker has failures.                                                                                                                                                                 | No | integer | 3              | \>=1                                                                                                                                                                                                            |
| relaunch_on_worker_failure | Maximum restart attempts for worker instances if worker has failures.                                                                                                                                                          | No | integer | 3              | \>=1                                                                                                                                                                                                            |
| log_dir          | User defined training log path. | No | string  | n/a            | n/a                                                                                                                                                                                                             |
| auto_config        | Whether to automatically configure the nnodes and nproc_per_nodes.                                                                                                                                                             | No | boolean | False          | n/a                                                                                                                                                                                                             |
| auto_tunning       | Whether to auto-tune the parallel configuration.                                                                                                                                                                               | No | boolean | False          | n/a                                                                                                                                                                                                             |
| exclude_straggler  | The node will exit if the node is straggler and the argument is True. The argument only works when network-check is True.                                                                                                      | No | boolean | False          | n/a                                                                                                                                                                                                             |                                                                                         |
| save_at_breakpoint | If True, the agent in the main process will save the checkpoint in the memory to the storage if the training process fails.                                                                                                    | No | boolean | False          | n/a                                                                                                                                                                                                             |                                                                                         |
| accelerator        | The type of accelerator chip of the machine.                                                                                                                                                                                   | No | string  | nvidia.com/gpu | nvidia.com/gpu<br/>ascend-npu                                                                                                                                                                                   |                                                                                         |
| numa_affinity      | Set workers processes cpu numa affinity or not.                                                                                                                                                                                | No | boolean | False          | n/a                                                                                                                                                                                                             |                                                                                         |
| network-check      | Whether to check network(run a training to check) before starting training process.                                                                                                                                            | No | boolean | False          | n/a                                                                                                                                                                                                             |                                                                                         |
| comm-perf-test     | Whether to test the communication performance.                                                                                                                                                                                 | No | boolean | False          | n/a                                                                                                                                                                                                             |                                                                                         |
| training_port      | Used for accelerator='ascend-npu'. To specified the starting port number for hccl. This argugment might be deprecated later(if [cann](https://support.huawei.com/enterprise/zh/ascend-computing/cann-pid-251168373) upgraded). | No | integer | 60000          | number in port range                                                                                                                                                                                            |
